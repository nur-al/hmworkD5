#команды использованные в shell для выполнения задания D5
from NewsPortal.models import *
user1 = User.objects.create_user('user1')
user2 = User.objects.create_user('user2')
author1 = Author.objects.create(user = user1)
author2 = Author.objects.create(user = user2)
cat1 = Category.objects.create(category_name = 'Детектив')
cat2 = Category.objects.create(category_name = 'Комедия')
cat3 = Category.objects.create(category_name = 'Фентези')
cat4 = Category.objects.create(category_name = 'Фантастика')
post1 = Post.objects.create(author = author1, news_or_article='ART', heading='django studying', text = 'blah blah blah')
post2 = Post.objects.create(author = author1, news_or_article='NEWS', heading='second django studying', text = 'blah blah blah')
post3 = Post.objects.create(author = author2, news_or_article='ART', heading='third django studying', text = 'blah blah blah')
post3.category.add(cat1, cat2)
post2.category.add(cat2, cat3)
post1.category.add(cat3, cat4)
cmnt1 = Comment.objects.create(post = post1, user = user1, text = 'govno')
cmnt2 = Comment.objects.create(post = post1, user = user1, text = 'tak sebe')
cmnt3 = Comment.objects.create(post = post2, user = user1, text = 'best post')
cmnt4 = Comment.objects.create(post = post3, user = user2, text = 'blah blah')
# так как я восстанавливал по памяти команды, не помню сколько раз я ставил лайк и дизлайк
post1.like()
post2.dislike()
cmnt1.like()
cmnt2.dislike()
author1.update_rating()
author2.update_rating()
best_author_values = Author.objects.all().order_by('-rating').values('user__username', 'rating').first()
best_post = Post.objects.all().order_by('-rating')[0]
print(best_post.time_in,best_post.author__user__username,best_post.rating,best_post.heading,best_post.preview())
Comment.objects.filter(post = best_post).values('time_in','user__username','rating','text')
